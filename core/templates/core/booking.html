{% extends 'main/base.html' %} {% load static %} {% block content %}
<section class="py-20 bg-[#fefcf7]">
  <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-2xl p-10">
    <h2
      class="text-4xl font-bold text-[var(--club-dark-brown)] mb-6 text-center font-['Cormorant_Garamond']"
    >
      Book a Service
    </h2>

    <p class="text-[var(--club-olive)] text-center mb-10 font-['Inter']">
      Fill in the form below and we'll reserve a spot for your pet.
    </p>

    <form method="POST" class="space-y-6">
      {% csrf_token %}

      <!-- Customer Name -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Your Name</label
        >
        <input
          type="text"
          name="name"
          required
          placeholder="John Doe"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        />
      </div>

      <!-- Pet Name -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Pet Name</label
        >
        <input
          type="text"
          name="pet_name"
          required
          placeholder="Buddy"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        />
      </div>

      <!-- Email -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Email Address</label
        >
        <input
          type="email"
          name="email"
          required
          placeholder="john@example.com"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        />
      </div>

      <!-- Phone -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Phone Number</label
        >
        <input
          type="tel"
          name="phone"
          required
          placeholder="+254712345678"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        />
      </div>

      <!-- Service -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Service</label
        >
        <select
          id="service"
          name="service"
          required
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        >
          <option value="">Select a service</option>
          {% for key, value in service_fees.items %}
          <option value="{{ key }}">{{ key }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Fee -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Service Fee (KES)</label
        >
        <input
          type="text"
          name="fee"
          id="fee"
          readonly
          class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"
        />
      </div>

      <!-- Date -->
      <div>
        <label
          class="block mb-2 font-semibold text-[var(--club-dark-brown)] font-['Inter']"
          >Preferred Date</label
        >
        <input
          type="date"
          name="date"
          required
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--club-sand)] focus:border-transparent"
        />
      </div>

      <!-- Consent -->
      <div class="flex items-start space-x-3">
        <input
          type="checkbox"
          name="consent"
          required
          class="h-5 w-5 text-[var(--club-sand)] rounded mt-1"
        />
        <label
          class="text-[var(--club-dark-brown)] font-['Inter'] text-sm leading-tight"
        >
          I agree that by submitting this form, I give consent to The Pet People
          to contact me regarding my booking.
        </label>
      </div>

      <!-- Submit -->
      <div class="text-center mt-8">
        <button
          type="submit"
          class="bg-[var(--club-sand-light)] hover:bg-[var(--club-sand)] text-white font-semibold px-16 py-3 rounded-none text-lg transition-all duration-300 hover:scale-105 font-['Inter']"
        >
          Submit Booking
        </button>
      </div>
    </form>
  </div>
</section>

<!-- JS to update fee -->
<script>
  const serviceFees = {{ service_fees|safe }};
  const serviceSelect = document.getElementById('service');
  const feeInput = document.getElementById('fee');

  serviceSelect.addEventListener('change', () => {
    const service = serviceSelect.value;
    feeInput.value = serviceFees[service] || 0;
  });
</script>

{% endblock %}
